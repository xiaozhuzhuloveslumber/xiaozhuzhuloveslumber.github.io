var searchFunc=function(e,i,c){"use strict";var a="<button type='button' class='local-search-close' id='local-search-close'></button>";$.ajax({url:e,dataType:"xml",success:function(e){var t=document.createElement("div"),r=$("entry",e).map(function(){return t.innerHTML=$("content",this).text(),{title:$("title",this).text(),content:t.innerHTML,url:$("url",this).text()}}).get(),n=document.getElementById(i),l=document.getElementById(c);n.addEventListener("input",function(){var f='<ul class="search-result-list">',d=this.value.trim().toLowerCase().split(/[\s]+/);if(l.innerHTML="",!(this.value.trim().length<=0)){if(r.forEach(function(e){var r=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var n=e.title.trim().toLowerCase(),l=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),t=e.url,i=-1,c=-1,a=-1;if(""!==l?d.forEach(function(e,t){i=n.indexOf(e),c=l.indexOf(e),i<0&&c<0?r=!1:(c<0&&(c=0),0==t&&(a=c))}):r=!1,r){f+="<li><a href='"+t+"' class='search-result-title'>"+n+"</a>";var s=e.content.trim().replace(/<[^>]+>/g,"");if(0<=a){var o=a-20,u=a+80;o<0&&(o=0),0==o&&(u=100),u>s.length&&(u=s.length);var h=s.substr(o,u);d.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<em class="search-keyword">'+e+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),-1===(f+="</ul>").indexOf("<li>"))return l.innerHTML=a+'<div class="search-result-empty"><p><i class="fe fe-tired"></i> 没有找到内容，更换下搜索词试试吧~<p></div>';l.innerHTML=a+f}})}}),$(document).on("click","#local-search-close",function(){$("#local-search-input").val(""),$("#local-search-result").html("")})};